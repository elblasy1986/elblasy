<!DOCTYPE html>
<html lang="en" class="standalone-page">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astronauts – World Clickers</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Roboto:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.png">
</head>

<body class="standalone-page">
    <a href="index.html" class="back-link">
        <i class="fa-solid fa-arrow-left"></i>
        Back to the Game
    </a>

    <div class="page-wrapper">
        <div class="guide-text">
            <h1 class="guide-title">Astronauts</h1>
            <p class="astronauts-intro">These astronauts are pioneers who reached the Moon for their countries. Their
                names are forever recorded as the first to unlock the Moon, securing their place as national legends and
                expanding humanity’s reach beyond Earth.</p>
            <div id="list-astronauts" class="guide-list leaderboard-list"></div>
        </div>
    </div>

    <script>
        const COUNTRY_NAMES = {
            'US': 'United States', 'CN': 'China', 'JP': 'Japan', 'DE': 'Germany',
            'FR': 'France', 'BR': 'Brazil', 'RU': 'Russia', 'GB': 'United Kingdom',
            'CA': 'Canada', 'AU': 'Australia', 'KR': 'South Korea', 'IT': 'Italy',
            'ES': 'Spain', 'IN': 'India', 'MX': 'Mexico', 'NL': 'Netherlands',
            'SE': 'Sweden', 'NO': 'Norway', 'FI': 'Finland', 'DK': 'Denmark'
        };

        async function renderAstronauts() {
            const list = document.getElementById('list-astronauts');
            list.innerHTML = '<p style="text-align:center; color:rgba(255,255,255,0.5); padding: 20px;">Loading astronauts...</p>';

            try {
                const response = await fetch('/api/leaderboard/astronauts');
                const data = await response.json();
                const astronauts = data.astronauts || [];

                list.innerHTML = '';

                if (astronauts.length === 0) {
                    list.innerHTML = '<p style="text-align:center; color:rgba(255,255,255,0.5); padding: 20px;">No one has reached the moon yet. Be the first from your country!</p>';
                    return;
                }

                astronauts.forEach((player, index) => {
                    const code = player.country_code;
                    const countryName = player.country_name || COUNTRY_NAMES[code] || code;
                    const entry = document.createElement('div');
                    entry.className = 'leaderboard-entry';
                    entry.style.alignItems = 'center'; /* Ensure vertical center */
                    entry.innerHTML = `
                        <div class="leaderboard-item">
                            <span class="lb-rank">${index + 1}.</span>
                            <img class="lb-flag" src="https://hatscripts.github.io/circle-flags/flags/${code.toLowerCase()}.svg" alt="${code}">
                            <span class="lb-name" style="text-align: left;">
                                <span class="lb-name-full">${countryName}</span>
                                <span class="lb-name-short">${code}</span>
                            </span>
                            <span class="lb-name" style="margin-left: auto; text-align: right; font-weight: bold; color: white; display: flex; align-items: center; justify-content: flex-end; gap: 8px;">
                                ${player.nickname}
                                <i class="fa-solid fa-user-astronaut" style="font-size: 0.9rem;"></i>
                            </span>
                        </div>
                    `;
                    list.appendChild(entry);
                });
            } catch (err) {
                console.error('Failed to load astronauts', err);
                list.innerHTML = '<p style="text-align:center; color:#ff4a4a; padding: 20px;">Failed to load pioneers.</p>';
            }
        }

        window.addEventListener('DOMContentLoaded', renderAstronauts);

        // Disable Right Click
        document.addEventListener('contextmenu', e => e.preventDefault());
    </script>
    <div id="custom-cursor"></div>
    <script>
        (function () {
            if (window.matchMedia("(pointer: coarse)").matches) return;
            const cursor = document.getElementById('custom-cursor');
            if (!cursor) return;
            document.addEventListener('mousemove', (e) => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
                const isClickable = e.target.closest('i, button, a, .menu-item, .tab-btn, .mobile-menu-item, .back-link') ||
                    window.getComputedStyle(e.target).cursor === 'pointer';
                cursor.style.transform = isClickable ? "scale(1.1) translateZ(9999px)" : "none translateZ(9999px)";
            });
            document.addEventListener('mouseleave', () => cursor.style.display = 'none');
            document.addEventListener('mouseenter', () => cursor.style.display = 'block');
        })();
    </script>
</body>

</html>